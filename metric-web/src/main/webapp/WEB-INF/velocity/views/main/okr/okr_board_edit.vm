<link href="${rc.contextPath}/_resources/css/bootstrap-select.css" rel="stylesheet">
<link href="${rc.contextPath}/_resources/css/jquery/select2.min.css" rel="stylesheet">
<script src="${rc.contextPath}/_resources/js/bootstrap-select.js"></script>
<script src="${rc.contextPath}/_resources/js/jquery.select2.full.js"></script>
<div class="ibox-content">
   <form class="form-horizontal" id="form1">
         <div class="form-group">
             <label class="col-sm-3 control-label">看板名称：</label>
             <div class="col-sm-8">
                 <input type="hidden" name="boardId" value="$!{target.boardId}">
                 <input type="text" class="form-control" name="boardName" value="$!{target.boardName}" style="width:400px">
             </div>
         </div>
          <div class="form-group">
                <label class="col-sm-3 control-label">图例:</label>
                <div class="col-sm-8">
                    <select class="multiple-chart-select" name="chartId" multiple="multiple" style="width:400px">
                        #foreach($item in $!{charts})
                            #set($flag=0)
                            #foreach($selChart in $!{relCharts})
                                #if($!{item.chartId} ==$!{selChart.chartId})
                                    #set($flag=1)
                                #end
                            #end
                            #if(${flag}==1)
                            <option value="$!{item.chartId}" selected="selected">$!{item.chartName}</option>
                            #else
                            <option value="$!{item.chartId}">$!{item.chartName}</option>
                            #end
                        #end
                    </select>
                </div>
           </div>
           <div class="form-group">
                <label class="col-sm-3 control-label">看板描述：</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" name="boardDesc" value="$!{target.boardDesc}" style="width:400px">
                </div>
             </div>
         <div class="form-group">
              <label class="col-sm-3 control-label">状态：</label>
              <div class="col-sm-8">
                  <select style="width:400px;height:30px"  name="state">
                        <option value="" >请选择状态</option>
                            <option value="1" #if($!target.state =='1') selected="selected" #end>启用</option>
                          <option value="0" #if($!target.state =='0') selected="selected" #end>禁用</option>
                  </select>
              </div>
          </div>
        <div align="center">
           <button class="btn btn-success" type="button" onclick="saveBoard()"><i class="glyphicon glyphicon-ok"></i>保存</button>
           <button class="btn btn-white" type="button" onclick="parent.closeLayer()"><i class="glyphicon glyphicon-remove"></i>返回</button>
        </div>
     </form>
 </div>
 <script>
  $(document).ready(function() {
        $(".multiple-chart-select").select2();
  });
  function saveBoard(){
     $.ajax({
        type: "POST",
        url:"saveBoard.html",
        dataType:"json",
        data:$('#form1').serialize(),
        success: function(data) {
           if(data.code == 1){
               parent.searchList();
               parent.closeLayer(data.msg);
            }else{
              parent.layer.msg(data.msg,failIcon);
            }
        }
    });
  }
</script>