<link href="${rc.contextPath}/_resources/css/bootstrap-select.css" rel="stylesheet">
<script src="${rc.contextPath}/_resources/js/bootstrap-select.js"></script>
<link href="${rc.contextPath}/_resources/css/plugins/iCheck/custom.css" rel="stylesheet">
<script src="${rc.contextPath}/_resources/js/plugins/iCheck/icheck.min.js"></script>
<div class="ibox-content">
    <form class="form-horizontal" id="form1">
        <div class="form-group">
            <label class="col-sm-3 control-label">脚本名称：</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" id="name" name="name" style="width:400px">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">脚本内容</label>
            <div class="col-sm-8">
                <textarea id="script" name="script" placeholder="这里输入脚本内容" style="width:400px;height:200px">$!{entity.content}</textarea>
            </div>
        </div>
        <div align="center">
            <button class="btn btn-white" type="button" onclick="saveScript()">保存</button>
            <button class="btn btn-white" type="button" onclick="closeLayer('0')">返回</button>
        </div>
    </form>
</div>
<script>
  function closeLayer(reload){
     if("1" == reload){
        parent.location.reload();
     }
     var index = parent.layer.getFrameIndex(window.name);
     parent.layer.close(index);
  }
  function saveScript(){
    var name = $('#name').val();
    var script = encodeURIComponent(document.getElementById("script").value);
    if (name == "") {
        parent.layer.msg("请输入脚本名称",failIcon);
        return;
    }
    if (script == '') {
        parent.layer.msg("请输入脚本内容",failIcon);
        return;
    }
     $.ajax({
        type: "POST",
        url:"save.html?name=" + name + "&script=" + script,
        success: function(data) {
           data = eval('(' + data + ')');
           if(data.code == 1){
               closeLayer(1);
           }else{
               parent.layer.msg(data.msg,failIcon);
           }
        }
    });
  }
  $(document).ready(function() {
     $('.i-checks').iCheck({
         checkboxClass: 'icheckbox_square-green',
         radioClass: 'iradio_square-green',
     });
   });
</script>
</html>