<script src="${rc.contextPath}/_resources/js/plugins/layer/laydate/laydate.js"></script>
<div class="ibox-content">
    <form role="form" class="form-inline">
        <div class="form-group">
           <label>广告名称:</label><input type="text" id="advertName" class="form-control">
           <label>渠道主:</label><input type="text" id="userName" class="form-control">
           <label>渠道名称:</label><input type="text" id="channelName" class="form-control">
            <label>日期</label>
            <input class="form-control layer-date" id="reportDateStr" value="$!{reportDate}" onclick="laydate({istime: true,isclear: false, format: 'YYYY-MM-DD'})">
        </div>
        <button class="btn btn-white" type="button" onclick="searchList('1')"><i class="glyphicon glyphicon-search"></i>查询</button>
        <button class="btn btn-info" type="button" onclick="exportData()"><i class="glyphicon glyphicon-export"></i>导出</button>
        <button class="btn btn-white" type="button" onclick="parent.closeLayer()"><i class="glyphicon glyphicon-remove"></i>返回</button>
    </form>
  </div>
  <div class="jqGrid_wrapper ">
     <table id="table_list_1"></table>
     <div id="pager_list_1"></div>
  </div>
<script>
    function searchList(page){
         $("#table_list_1").jqGrid('setGridParam',{
              url:'reportDetailJson.html?'+getParams(),
              page:page
         }).trigger("reloadGrid");
    }
    function getParams(){
        var advertName=$("#advertName").val();
        var userName=$("#userName").val();
        var channelName=$("#channelName").val();
        var reportDateStr=$("#reportDateStr").val();
        return "advertName="+advertName+"&userName="+userName+"&channelName="+channelName+"&reportDateStr="+reportDateStr;
    }
   $(document).ready(function () {
       $.jgrid.defaults.styleUI = 'Bootstrap';
       $('#table_list_1').jqGrid({
              url:'reportDetailJson.html?'+getParams(),
              datatype: "json",
              height: '70%',
              autowidth: true,
              shrinkToFit: true,
              rowNum: 20,
              rowList: [20, 30, 50],
              viewrecords : true,
              footerrow : true,
              userDataOnFooter : true,
              colNames: ['日期','广告名称','渠道主','渠道名称','渠道编号','广告总收入','渠道总支出','利润'],
              colModel: [
                 {
                    name: 'reportDateStr',
                    width: 10
                 },
                  {
                     name: 'advertName',
                     width: 10
                  },
                  {
                    name: 'userName',
                    width: 10
                  },
                  {
                    name: 'channelName',
                    width: 10
                  },
                 {
                   name: 'channelCode',
                   width: 10
                 },
                 {
                  name: 'income',
                  width: 10
                },
                {
                  name: 'expend',
                  width: 10
                },
                {
                  name: 'profit',
                  width: 10
                }
              ],
              pager: "#pager_list_1"
         });
   });

   function exportData(){
      window.location.href="exportReportDetail.html?"+getParams();
   }
</script>
</html>